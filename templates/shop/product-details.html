{% extends "shop/base.html" %}
{% load static %}
{% block content %}
<div class="breadcrumb-area pt-95 pb-95 bg-img" style="background-image:url('{% static 'shop/img/banners/banner-2.jpg' %}');">
    <div class="container">
        <div class="breadcrumb-content text-center">
            <h2>Product Details</h2>
            <ul>
                <li><a href="{% url 'shop:index' %}">home</a></li>
                <li class="active">Product Details</li>
            </ul>
        </div>
    </div>
</div>
<div class="shop-area pt-95 pb-100">
    <div class="container">
        <div class="row">
            <div class="col-lg-6 col-md-6">
                <div class="product-details-img">
                    <img id="zoompro" src="{{ product.image.url }}" data-zoom-image="{{ product.image.url }}" alt="{{ product.name }}" />
                    <div id="gallery" class="mt-12 product-dec-slider owl-carousel">
                        <a data-image="{{ product.image.url }}" data-zoom-image="{{ product.image.url }}">
                            <img src="{{ product.image.url }}" alt="">
                        </a>
                        <a data-image="{{ product.image.url }}" data-zoom-image="{{ product.image.url }}">
                            <img src="{{ product.image.url }}" alt="">
                        </a>
                        <a data-image="{{ product.image.url }}" data-zoom-image="{{ product.image.url }}">
                            <img src="{{ product.image.url }}" alt="">
                        </a>
                        <a data-image="{{ product.image.url }}" data-zoom-image="{{ product.image.url }}">
                            <img src="{{ product.image.url }}" alt="">
                        </a>
                        <a data-image="{{ product.image.url }}" data-zoom-image="{{ product.image.url }}">
                            <img src="{{ product.image.url }}" alt="">
                        </a>
                    </div>
                </div>
            </div>
            <div class="col-lg-6 col-md-6">
                <div class="product-details-content">
                    <h2>{{ product.name }}</h2>
                    <div class="product-rating">
                        {% for i in "12345" %}
                            {% if overall_rating and overall_rating >= forloop.counter %}
                                <i class="ti-star theme-color"></i>
                            {% else %}
                                <i class="ti-star"></i>
                            {% endif %}
                        {% endfor %}
                        <span>({{ review_count }} Customer Review{{ review_count|pluralize }})</span>
                    </div>
                    <div class="product-price">
                        <span class="new">${{ product.new_price }} </span>
                        {% if product.old_price %}
                        <span class="old">${{ product.old_price }}</span>
                        {% endif %}
                    </div>
                    <div class="in-stock">
                        <span><i class="ion-android-checkbox-outline"></i> In Stock</span>
                    </div>
                    <p>{{ categories_string }}</p>
                    <form action="{% url 'cart:cart_add' product.id %}" method="post">
                        {% csrf_token %}
                        <div class="quality-wrapper mt-30 product-quantity">
                            <label>Qty:</label>
                            <div class="cart-plus-minus">
                                <input class="cart-plus-minus-box" type="number" name="quantity" value="1" min="1">
                            </div>
                        </div>
                        <div class="product-list-action">
                            <div class="product-list-action-left">
                                <button type="submit" class="addtocart-btn" title="Add to cart">
                                    <i class="ion-bag"></i>
                                    Add to cart
                                </button>
                            </div>
                            <div class="product-list-action-right">
                                {% if user.is_authenticated %}
                                <a href="{% url 'wishlist:wishlist_add' product.id %}" title="Wishlist">
                                    <i class="ti-heart"></i>
                                </a>
                                {% endif %}
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="description-review-area pb-100">
    <div class="container">
        <div class="description-review-wrapper gray-bg pt-40">
            <div class="description-review-topbar nav text-center">
                <a class="active" data-toggle="tab" href="#des-details1">DESCRIPTION</a>
                <a data-toggle="tab" href="#des-details2">INGREDIENTS</a>
                <a data-toggle="tab" href="#des-details3">REVIEWS ({{ review_count }})</a>
            </div>
            <div class="tab-content description-review-bottom">
                <div id="des-details1" class="tab-pane active">
                    <div class="product-description-wrapper">
                        <p>{{ product.description|linebreaksbr }}</p>
                    </div>
                </div>
                <div id="des-details2" class="tab-pane">
                    <div class="product-anotherinfo-wrapper">
                        <p>{{ product.ingredients|linebreaksbr }}</p>
                    </div>
                </div>
                <div id="des-details3" class="tab-pane">
                    <div class="rattings-wrapper">
                        {% for review in reviews %}
                            <div class="sin-rattings">
                                <div class="star-author-all">
                                    <div class="product-rating f-left">
                                        {% for i in "12345" %}
                                            {% if review.rating >= forloop.counter %}
                                                <i class="ti-star theme-color"></i>
                                            {% else %}
                                                <i class="ti-star"></i>
                                            {% endif %}
                                        {% endfor %}
                                        <span>({{ review.rating }})</span>
                                    </div>
                                    <div class="ratting-author f-right">
                                        <h3>{{ review.first_name }} {{ review.last_name }}</h3>
                                        <span>{{ review.created_at|date:"H:i" }}</span>
                                        <span>{{ review.created_at|date:"d M Y" }}</span>
                                    </div>
                                </div>
                                <p>{{ review.review_text|linebreaksbr }}</p>
                            </div>
                        {% endfor %}
                    </div>
                    <div class="ratting-form-wrapper">
                        <h3>Add your Comments :</h3>
                        <div class="ratting-form">
                            <form method="post">
                                {% csrf_token %}
                                <div class="star-box">
                                    <h2>Rating:</h2>
                                    <div class="product-rating">
                                        {% for i in "12345" %}
                                            <input type="radio" id="star{{ forloop.counter }}" name="rating" value="{{ forloop.counter }}">
                                            <label for="star{{ forloop.counter }}" data-value="{{ forloop.counter }}">
                                                <i class="ti-star"></i>
                                            </label>
                                        {% endfor %}
                                        <span id="rating-value">(0)</span>
                                    </div>
                                </div>
                                <div class="row">
                                    {% if not user.is_authenticated %}
                                    <div class="col-md-6">
                                        <div class="rating-form-style mb-20">
                                            {{ form.first_name }}
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="rating-form-style mb-20">
                                            {{ form.last_name }}
                                        </div>
                                    </div>
                                    <div class="col-md-12">
                                        <div class="rating-form-style mb-20">
                                            {{ form.email }}
                                        </div>
                                    </div>
                                    {% endif %}
                                    <div class="col-md-12">
                                        <div class="rating-form-style mb-20">
                                            {{ form.review_text }}
                                        </div>
                                    </div>
                                    <div class="col-md-12">
                                        <div class="rating-form-style form-submit">
                                            <input type="submit" value="Add Review">
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
